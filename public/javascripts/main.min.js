function parseURL(){let e=window.location.hash;return(e=e.split("/")).hash=e[0].substring(1,window.location.hash.length),e.length>0&&(e.anchor=e[1]),e}function scrollTo(){const e=parseURL(),o=$("a[name='"+e.anchor+"']");o.length&&$("html,body").animate({scrollTop:o.offset().top},150)}function getDocs(e){$.ajax({method:"GET",url:"/sidebar"}).done((o,n)=>{e(o)})}function stripHTML(e){return $(e).text().trim()}function setMetaTags(e){document.title=e.docTitle,$("meta[property='og\\:title']").attr("content",e.docTitle),$("meta[name=title]").attr("content",e.docTitle),stripHTML(e.docBody).length>160?($("meta[property='og\\:description']").attr("content",stripHTML(e.docBody.substring(0,200))),$("meta[name=description]").attr("content",stripHTML(e.docBody.substring(0,200)))):($("meta[property='og\\:description']").attr("content",stripHTML(e.docBody)),$("meta[name=description]").attr("content",stripHTML(e.docBody)))}function organizeDocsByDir(e){return e.reduce((e,o)=>(e[o.docDir]||(e[o.docDir]=[]),e[o.docDir].push(o),e),{})}function populateSideMenu(e){console.log("Populating side menu!"),$.each(e,(e,o)=>{$(".sidebar").append(`\n            <li class="list-group-item collection-item sidebarLink">\n                <a onclick="expand('${e}-collapsible-content', this)" class="sidebar-title"><i class="collapsible-indicator"></i>${e}</a>\n                <div class="collapsible-content" id="${e}-collapsible-content">\n                    ${generateDocumentLinks(o)}\n                </div>\n            </li>\n        `)})}function generateDocumentLinks(e){let o="";return e.forEach(e=>{const n=`<a href="#${e.docSlug}" class="document-link">${e.docTitle}</a>\n`;o+=n}),o}function populateTopMenu(){$.ajax({method:"GET",url:"/config"}).done((e,o)=>{$.each(e.menuItems,(e,o)=>{$(".nav").append('<li><a href="'+o.menuLink+'">'+o.menuTitle+"</a></li>")})})}function injectFunctionality(){const e=document.createElement("script");e.innerHTML=function(e,o){$(`#${e}.collapsible-content`).toggleClass("expanded"),$($(o).find("i")[0]).toggleClass("expanded")}.toString(),$("head").append(e)}$(document).ready(()=>{let e=!1;"none"===$("#xs-element").css("display")&&(e=!0),window.location.hash&&$(window).trigger("hashchange"),injectFunctionality(),getDocs(e=>{populateSideMenu(organizeDocsByDir(e.docs)),$(".navbar-brand, .brand-logo").html(e.config.title),""===window.location.hash&&e.docs.length>0&&(window.location.hash="#"+e.docs[0].docSlug);const o=$(".sidebarLink");console.log("CurrentListGroup: ",o),populateTopMenu(),$("#searchInput").on("keyup",()=>{$("#searchInput").val().length>2?$.ajax({method:"POST",data:{keyword:$("#searchInput").val()},url:"/search"}).done((e,n)=>{"success"===n?($(".sidebarLink").remove(),populateSideMenu(organizeDocsByDir(e))):($(".sidebarLink").remove(),$(".sidebar").append(o))}):($(".sidebarLink").remove(),$(".sidebar").append(o))})}),$("#sidebarCollapse").on("click",()=>{$("#sidebar").toggleClass("active")}),$("body").on("click",".sidebarLink",()=>{e&&$("#sidebar").toggleClass("active")}),$("body").on("click",".sidebarLink a",()=>{$(".sidebar-container").toggleClass("sidebar-container-show")})}),$(window).bind("hashchange",()=>{scrollTo(),"#"===window.location.hash.trim()||""===window.location.hash.trim()?getDocs(e=>{e.docs.length>0?($("#main").html(e.docs[0].docBody),setMetaTags(e.docs[0]),window.location.hash="#"+e.docs[0].docSlug):$("#main").html("<h3>No docs. Please create some docs.<h3>")}):$.ajax({method:"GET",url:"/doc/"+parseURL().hash}).done((e,o)=>{e.doc.docBody?($("#main").html(e.doc.docBody),setMetaTags(e.doc),e.doc.nextDoc?($("#linkNext a").attr("href","#"+e.doc.nextDoc.docSlug),$("#linkNext a").removeClass("hidden hide")):$("#linkNext a").addClass("hidden hide"),e.doc.prevDoc?($("#linkPrev a").attr("href","#"+e.doc.prevDoc.docSlug),$("#linkPrev a").removeClass("hidden hide")):$("#linkPrev a").addClass("hidden hide"),$("pre code").each((e,o)=>{hljs.highlightBlock(o)}),$("img").each(function(e){$(this).parent().addClass("center-align align-center"),$(this).addClass("img-responsive responsive-img")}),e.config.addAnchors&&scrollTo()):$("#main").html('<h1 class="text-center">404 Not found<h1>')})});