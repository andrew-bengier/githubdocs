function parseURL(){var o=window.location.hash;return o=o.split("/"),o.hash=o[0].substring(1,window.location.hash.length),o.length>0&&(o.anchor=o[1]),o}function scrollTo(){var o=parseURL(),e=$("a[name='"+o.anchor+"']");e.length&&$("html,body").animate({scrollTop:e.offset().top},"slow")}function getDocs(o){$.ajax({method:"GET",url:"/sidebar"}).done(function(e,t){o(e)})}function stripHTML(o){return $(o).text().trim()}function setMetaTags(o){document.title=o.docTitle,$("meta[property='og\\:title']").attr("content",o.docTitle),$("meta[name=title]").attr("content",o.docTitle),stripHTML(o.docBody).length>160?($("meta[property='og\\:description']").attr("content",stripHTML(o.docBody.substring(0,200))),$("meta[name=description]").attr("content",stripHTML(o.docBody.substring(0,200)))):($("meta[property='og\\:description']").attr("content",stripHTML(o.docBody)),$("meta[name=description]").attr("content",stripHTML(o.docBody)))}function populateSideMenu(o){$.each(o,function(o,e){$(".sidebar").append('<li class="list-group-item collection-item sidebarLink"><a href="#'+e.docSlug+'">'+e.docTitle+"</a></li>")})}function populateTopMenu(){$.ajax({method:"GET",url:"/config"}).done(function(o,e){$.each(o.menuItems,function(o,e){$(".nav").append('<li><a href="'+e.menuLink+'">'+e.menuTitle+"</a></li>")})})}$(document).ready(function(){window.location.hash&&$(window).trigger("hashchange"),getDocs(function(o){populateSideMenu(o.docs),$(".navbar-brand, .brand-logo").html(o.config.title),""===window.location.hash&&o.docs.length>0&&(window.location.hash="#"+o.docs[0].docSlug);var e=$(".sidebarLink");populateTopMenu(),$("#searchInput").on("keyup",function(){$("#searchInput").val().length>2?$.ajax({method:"POST",data:{keyword:$("#searchInput").val()},url:"/search"}).done(function(o,t){"success"===t?($(".sidebarLink").remove(),$.each(o,function(o,e){$(".sidebar").append('<li class="list-group-item collection-item sidebarLink"><a href="#'+e.docSlug+'">'+e.docTitle+"</a></li>")})):($(".sidebarLink").remove(),$(".sidebar").append(e))}):($(".sidebarLink").remove(),$(".sidebar").append(e))})}),$(".sidebarToggle").click(function(){$(".sidebar-container").toggleClass("sidebar-container-show")}),$("body").on("click",".sidebarLink a",function(){$(".sidebar-container").toggleClass("sidebar-container-show")})}),$(window).bind("hashchange",function(){scrollTo(),"#"===window.location.hash.trim()||""===window.location.hash.trim()?getDocs(function(o){o.docs.length>0?($("#main").html(o.docs[0].docBody),setMetaTags(o.docs[0]),window.location.hash="#"+o.docs[0].docSlug):$("#main").html("<h3>No docs. Please create some docs.<h3>")}):$.ajax({method:"GET",url:"/doc/"+parseURL().hash}).done(function(o,e){if($("#main").html(o.doc.docBody),setMetaTags(o.doc),o.doc.nextDoc?($("#linkNext a").attr("href","#"+o.doc.nextDoc.docSlug),$("#linkNext a").removeClass("hidden hide")):$("#linkNext a").addClass("hidden hide"),o.doc.prevDoc?($("#linkPrev a").attr("href","#"+o.doc.prevDoc.docSlug),$("#linkPrev a").removeClass("hidden hide")):$("#linkPrev a").addClass("hidden hide"),$("pre code").each(function(o,e){hljs.highlightBlock(e)}),o.config.addAnchors){var t=parseURL();$("h1, h2, h3, h4, h5").each(function(o){var e=$(this).text();$(this).html("<a name='"+e+"' href='#"+t.hash+"/"+e+"'>"+e+"</a>")}),scrollTo()}})});